This document describes how event hooks work in the Translate extension;
how to add hooks for an event; and how to run hooks for an event.

For a more comprehensive guide to hooks, navigate to your root MediaWiki
directory, and then find /docs/hooks.txt.

== Rationale ==

Hooks allow us to decouple optionally-run code from code that is run for
everyone. It allows MediaWiki hackers, third-party developers and local
administrators to define code that will be run at certain points in the mainline
code, and to modify the data run by that mainline code. Hooks can keep mainline
code simple, and make it easier to write extensions. Hooks are a principled
alternative to local patches.

== Writing hooks ==

=== PHP hooks ===
For a more guide to PHP hooks, navigate to your root MediaWiki
directory, and then find /docs/hooks.txt .

=== JavaScript hooks ===
JavaScript hooks for the Translate extension are a little different. To use them, declare a
dependency on ext.translate.hooks . Then, use

	mw.translateHooks.add( name, hookFunction );

where name is a string, but hookFunction is not (unlike in the case of PHP hooks)
but rather a function reference. Return values from JavaScript hooks are ignored.

== Events and parameters ==

This is a list of known events and parameters; please add to it if you're going
to add events to the Translate extension.

=== PHP events ===
'TranslateBeforeAddModules': Provides an opportunity to load extra modules
	&$modules: Array of module names to be loaded

'TranslateFormatMessageBeforeTable': Provides an opportunity to manipulate the display of translation strings (messages) in the main table
	&$message: The message (string) that will be displayed
	$m: ThinMessage object representing the source object, useful for $m->original() and $m->translation()
	$group: The source message group
	$targetLanguage: The language for which translations are being shown
	&$attributes: An array of attributes that will

'TranslateGetBoxes': Provides an opportunity to add or remove "boxes" (translation helpers) from the translation interface
	$group: The message group being used at the time
	$handle: A MessageHandle object representing the translation page (e.g. 'MediaWiki:Example/qqq')
	&$boxes: An associative array to be appended to (format: 'name' => 'some HTML string')

'TranslateGetExtraInputs': Provides an opportunity to add extra form inputs to to the default translation editor
	&$translation: The translation string as it stands
	&$extraInputs: The extra input space, ready for HTML to be appended

'TranslateGetSpecialTranslateOptions': Provides an opportunity for overriding task values
	&$defaults: Associative array of default values
	&$nondefaults: Associative array of nondefault (override) values

'TranslateGetTranslateInfoParams': Allows extra parameters to be added to the action=query&prop=translateinfo module
	&$params: An associative array of possible parameters (name => details; see files for correct format)

'TranslateGetTranslateInfoParamDescs': Provides an opportunity to document any parameters added with 'TranslateGetTranslateInfoParams'.
	&$paramDescs: An associative array of parameters, name => description.
	$p: The prefix for action=query&prop=translateinfo (currently ti, but could change), useful for documentation

'TranslateGetTranslateInfoPropertyList': Allows extra properties to be added to captured by action=query&prop=translateinfo&tiprop=foo|bar|bat module
	&$properties: An associative array of properties, name => description.

'TranslatePrefillTranslation': Provides an opportunity for a new translation to start not from as a carte blanche (the default) but from some prefilled string
	&$translation: The translation string as it stands
	$handle: The current MessageHandle object

'TranslateProcessTranslateInfoProperties': Allows exrra property requests to be acted upon, and the new new properties returned
	&$props: Associative array of the properties of $group that will be returned
	$propsToReturn: Associative array ($name => true) of properties the user has specifically requested
	$params: Parameter input by the user (unprefixed name => value)
	$group: The group in question

=== JavaScript events ===
'afterRegisterFeatures': Provides an opportunity to register event handlers, etc., whenever a new form is opened.
	form: The new form

'afterSubmit': Provides an opportunity to modify a Translate translation form immediately before it is submitted
	form: The form being submitted

'beforeSubmit': Provides an opportunity to modify a Translate translation form immediately after it is submitted
	form: The form that has just been submitted