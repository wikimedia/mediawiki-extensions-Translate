{
  "comments": [
    {
      "key": {
        "uuid": "6e7c4fa4_993404a9",
        "filename": "scripts/ttmserver-export.php",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 93
      },
      "writtenOn": "2015-03-26T10:41:08Z",
      "side": 1,
      "message": "This could be just a one line.",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_b939c0a0",
        "filename": "scripts/ttmserver-export.php",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 93
      },
      "writtenOn": "2015-03-26T10:41:08Z",
      "side": 1,
      "message": "Extra space at the end. Also, this script will rebuild the index (or parts of it) by default. I think the wording should clearer that this updates the schema of the index â€“ I am not sure what is the term people use for this.\n\nhttps://www.elastic.co/blog/changing-mapping-with-zero-downtime\n\nAlso, when sharing one ES with multiple wikis, this option will erase all data. That should be mentioned.",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_01e632ab",
        "filename": "scripts/ttmserver-export.php",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 2164
      },
      "writtenOn": "2015-03-27T02:30:07Z",
      "side": 1,
      "message": "This script will rebuild the index from scratch. So, the search will be down while rebuild process. The link you have provided takes different approach, it creates index aliases to reindex data in the background and therefore the search will be up the entire time. I could look into this method and add another option for this approach and may be call it \"reindex\"?\n\nFor this script we can change the option from \"reindex\" to something like \"eraseAndStart\" or \"restart\" or could you suggest something more suitable.",
      "parentUuid": "6e7c4fa4_b939c0a0",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_7c46adc4",
        "filename": "scripts/ttmserver-export.php",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 93
      },
      "writtenOn": "2015-03-27T08:14:46Z",
      "side": 1,
      "message": "The script will rebuild the index in any case regardless of the parameter. If it is a shared index, it will rebuild only part of the index.\n\nMy point is that this option is about updating the index mappings/schema. The way we do the reindexing after that is not part of this patch.",
      "parentUuid": "6e7c4fa4_01e632ab",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_1948f430",
        "filename": "ttmserver/ElasticSearchTTMServer.php",
        "patchSetId": 2
      },
      "lineNbr": 282,
      "author": {
        "id": 93
      },
      "writtenOn": "2015-03-26T10:41:08Z",
      "side": 1,
      "message": "Align the stars.",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_793fa882",
        "filename": "ttmserver/ElasticSearchTTMServer.php",
        "patchSetId": 2
      },
      "lineNbr": 284,
      "author": {
        "id": 93
      },
      "writtenOn": "2015-03-26T10:41:08Z",
      "side": 1,
      "message": "This should probably be protected. $rebuild parameter is not documented.",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_f94ad826",
        "filename": "ttmserver/ElasticSearchTTMServer.php",
        "patchSetId": 2
      },
      "lineNbr": 301,
      "author": {
        "id": 93
      },
      "writtenOn": "2015-03-26T10:41:08Z",
      "side": 1,
      "message": "I think this would be clearer as \"else if\". Now it leaves me wondering if there is case where we are reindexing but that fails to create an index, and here we would try again.",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_995ba4fc",
        "filename": "ttmserver/ElasticSearchTTMServer.php",
        "patchSetId": 2
      },
      "lineNbr": 447,
      "author": {
        "id": 93
      },
      "writtenOn": "2015-03-26T10:41:08Z",
      "side": 1,
      "message": "How about calling it forceReindex and not take parameter?\n\nPlease also document the function and add @since 2015.03",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_618da6d7",
        "filename": "ttmserver/ElasticSearchTTMServer.php",
        "patchSetId": 2
      },
      "lineNbr": 447,
      "author": {
        "id": 2164
      },
      "writtenOn": "2015-03-27T02:30:07Z",
      "side": 1,
      "message": "$reindex value is to be passed from ttmserver-export.php.\nI have used this function as a setter for $reindex parameter in ElasticSearchTTMServer.",
      "parentUuid": "6e7c4fa4_995ba4fc",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_dc0ee190",
        "filename": "ttmserver/ElasticSearchTTMServer.php",
        "patchSetId": 2
      },
      "lineNbr": 447,
      "author": {
        "id": 93
      },
      "writtenOn": "2015-03-27T08:14:46Z",
      "side": 1,
      "message": "As far as I know it will only ever be set to true.\n\n# Whatever term we will use, see comments on the another file\npublic function doSchemaUpdate() {\n  $this-\u003eupdateSchema \u003d true;\n}",
      "parentUuid": "6e7c4fa4_618da6d7",
      "revId": "3d917d9f1e3b193ff9d8f56bad968cc48f9d1f7c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}